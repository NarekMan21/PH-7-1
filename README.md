# Бэкенд для датчика почвы ESP8266

## Установка

1. Установите Node.js (если еще не установлен)
2. Установите зависимости:
```bash
npm install
```

## Настройка

1. Узнайте IP адрес вашего компьютера в локальной сети:
   - Windows: `ipconfig` (смотрите IPv4 адрес)
   - Linux/Mac: `ifconfig` или `ip addr`
   
2. Обновите IP адрес в коде ESP8266:
   - Откройте файл с кодом ESP8266
   - Найдите строку: `#define BACKEND_URL    "http://192.168.1.100:3000/save"`
   - Замените `192.168.1.100` на IP адрес вашего компьютера

## Запуск

```bash
npm start
```

Сервер запустится на `http://localhost:3000` и будет доступен по IP адресу вашего компьютера в локальной сети.

## API Эндпоинты

- **POST /save** - Сохранение данных от ESP8266 (используется автоматически)
- **GET /history** - Получение истории данных (можно использовать `?limit=100&offset=0`)
- **GET /export/csv** - Экспорт всех данных в CSV
- **GET /export/json** - Экспорт всех данных в JSON
- **GET /stats** - Статистика (количество записей, первая/последняя дата)
- **DELETE /clear** - Очистка всех данных

## Данные

Все данные автоматически сохраняются в файл `sensor_data.json` в той же папке, где запущен сервер.

ESP8266 автоматически отправляет данные на бэкенд каждые 30 секунд.

